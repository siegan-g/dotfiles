"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[727],{43011:function(e,t,n){n.d(t,{$:function(){return m}});var r=n(35181),a=n(27378),l=n.n(a),i=n(97015),s=n(18291),u=n(42044),o=n(39519);function c(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const m=({children:e})=>{let t=c(e);const n=(0,s.Y)(o.yA)===u.q9.PLAYING,a=(0,s.Y)((e=>null==e?void 0:e.item));return a&&n&&((0,u.G_)(a)?t=[a.name,a.artists.map((e=>e.name)).join(r.ag.getSeparator())].join(" · "):(0,u.iw)(a)?t=[a.name,a.show.name].join(" · "):(0,u.k6)(a)&&(t=c(r.ag.get("ad-formats.advertisement")))),l().createElement(i.q,{defaultTitle:r.ag.get("page.generic-title"),defer:!1},l().createElement("title",null,t))}},10234:function(e,t,n){n.r(t),n.d(t,{QueueHistoryRoutes:function(){return we},default:function(){return ke}});var r=n(27378),a=n.n(r),l=n(85002),i=n(10053),s=n(66917),u=n.n(s),o=n(79378),c=n(50878),m=n(13122),d=n(64649),p=n(55078),g=n(60849);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const y=[];function f(e,t=!0){const[n,a]=(0,r.useState)({});return(0,r.useEffect)((()=>{if(!t)return;const r=Array.from(new Set(e)),l=r.filter((e=>u().isTrack(e)&&!n[e])),i=r.filter((e=>u().isEpisode(e)&&!n[e])),s=l.length?p.fQ.getTracks(g.b.getInstance(),l.map((e=>u().from(e).getBase62Id()))).then((e=>e.body.tracks||y)):Promise.resolve(y),o=i.map((e=>p.UY.getEpisodeGraphQL(g.b.getInstance(),u().from(e).getBase62Id()).then((e=>(null==e?void 0:e.body)||{})).catch((t=>(console.error(t),{uri:e})))));Promise.all([s,...o]).then((([e,...t])=>{const n={},r={};e.forEach((e=>{var t;n[(null==e||null===(t=e.linked_from)||void 0===t?void 0:t.uri)||e.uri]=e})),t.forEach((e=>{r[e.uri]=e})),(e.length>0||t.length>0)&&a((e=>v(v(v({},e),n),r)))}))}),[e,n,t]),e.map((e=>n[e]))}var b=n(40299),h=n(61750),O=n(64619);const w=a().memo((({items:e})=>{const t=f(e.map((e=>e.uri))).map(((t,n)=>e[n].isLocal?e[n]:t)),n=(0,r.useCallback)(((e,t)=>{if((r=e).type===O.p.TRACK&&u().isTrack(r.uri)){var n;const r=(0,b.X)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40});return a().createElement(m.Lk,{key:t+e.uri,index:t,uri:(0,h.$V)(e),name:e.name,duration_ms:e.duration_ms,imgUrl:(null==r?void 0:r.url)||"",album:e.album,artists:e.artists,isExplicit:e.explicit,isMOGEFRestricted:(e.tags||[]).includes("MOGEF-19+")})}var r,l,i;if((e=>e.type===O.p.EPISODE)(e)){var s;const n=(0,b.X)(null===(s=e.show)||void 0===s?void 0:s.images,{desiredSize:40});return a().createElement(m.Lk,{key:t+e.uri,index:t,uri:(0,h.$V)(e),name:e.name,duration_ms:e.duration_ms,imgUrl:(null==n?void 0:n.url)||"",album:{name:e.show.name,uri:e.show.uri},artists:[{name:e.show.publisher,uri:""}],isExplicit:e.explicit,isMOGEFRestricted:!1})}return(e=>e.type===O.p.TRACK&&u().isLocalTrack(e.uri))(e)?a().createElement(m.Lk,{key:t+e.uri,index:t,uri:e.uri,name:e.name,duration_ms:e.duration,imgUrl:e.imageUrl||"",album:{name:(null===(l=e.album)||void 0===l?void 0:l.name)||"",uri:""},artists:[{name:(null===(i=e.artist)||void 0===i?void 0:i.name)||"",uri:""}],isExplicit:e.isExplicit,isMOGEFRestricted:!1}):a().createElement(o.hU,{height:`${o.dN}px`})}),[]);return a().createElement(a().Fragment,null,a().createElement(c.ZP,{value:"play-history-tracklist"},a().createElement(o.Pv,{ariaLabel:"play-history",hasHeaderRow:!0,columns:[o.QD.TITLE,o.QD.ALBUM_OR_PODCAST,o.QD.DURATION],renderRow:n,resolveUri:e=>e.uri,tracks:t,nrTracks:t.length,rowPlaceholder:o.hU,limit:50})))}));var k=n(14298),x=n(9807),D=n(68463),N=n(35181),P="_bwOX6xUYboLd8ZRDQU_",C="klyCZ9gtSEZh__bIlwPF",_="AQLW6AsH9J1y01uMG5Mp";const I=()=>a().createElement("div",{className:P},a().createElement(D.l,{iconSize:64}),a().createElement(x.Dy.h1,{variant:x.$e.alto,color:k.$_Y.white,className:C},N.ag.get("history.empty-title")),a().createElement("p",null,N.ag.get("history.empty-description")));var q="gg9zQK8aifzXrHCbhquJ",S="_cpmqRrAqDW34A02gOYT";const U=()=>{const e=(0,i.U5)();return e&&e.items.length>0?a().createElement("div",{className:q},a().createElement(x.Dy.h1,{variant:x.$e.canon,color:k.$_Y.white,className:S},N.ag.get("view.recently-played")),a().createElement(w,{items:e.items})):a().createElement(I,null)};var L=n(60042),j=n.n(L),A=n(54220),$=n(88319),T=n(21195),R=n(42044);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Y=(e,t)=>{const n=f(e.slice(0,50).map((e=>e.uri)),t);return t?e.reduce(((e,t,r)=>(n[r]&&e.push(((e,t)=>(0,R.G_)(e)&&(e=>"track"===e.type)(t)?Q(Q({},e),{},{name:t.name,album:Q(Q({},e.album),{},{name:t.album.name,images:t.album.images,uri:t.album.uri}),artists:t.artists.map((e=>({name:e.name,uri:e.uri,type:O.p.ARTIST}))),duration:{milliseconds:t.duration_ms},isExplicit:t.explicit,is19PlusOnly:(t.tags||[]).includes("MOGEF-19+")}):(0,R.iw)(e)&&(e=>"episode"===e.type)(t)?Q(Q({},e),{},{name:t.name,show:Q(Q({},e.show),{},{name:t.show.name,images:t.show.images,uri:t.show.uri}),duration:{milliseconds:t.duration_ms}}):e)(t,n[r])),e)),[]):e},z=a().memo((({tracks:e,ariaLabel:t,contextUri:n,rowNumberOffset:l=0,section:i,usePlayContextItem:s})=>{const u=(0,$.o)(),c=(0,T.g)(),m=Y(e,!c.getCapabilities().hasDecoratedQueue),d=(0,r.useCallback)(((e,t)=>{u({intent:"remove-from-queue",type:"click"}),c.removeFromQueue(e.map((e=>({uid:e.id,uri:e.uri})))).then(t)}),[c,u]),p=(0,r.useCallback)(((e,t)=>{if((0,R.iw)(e)){var r,u;const c=(0,b.X)(null===(r=e.show)||void 0===r?void 0:r.images,{desiredSize:40});return a().createElement(o.pD,{key:`${t}${l}${e.uid}`,index:t,rowNumberOffset:l,imgUrl:(null==c?void 0:c.url)||"",uri:(0,h.$V)(e),uid:null!==(u=e.uid)&&void 0!==u?u:e.uri,contextUri:n,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:o.jO.EPISODE,section:i,usePlayContextItem:s})}if((0,R.G_)(e)){var c,m,d,p;const r=(0,b.X)(null==e||null===(c=e.album)||void 0===c?void 0:c.images,{desiredSize:40});return a().createElement(o.pD,{key:`${t}${l}${e.uid}`,index:t,rowNumberOffset:l,imgUrl:(null==r?void 0:r.url)||"",uri:(0,h.$V)(e),uid:null!==(m=e.uid)&&void 0!==m?m:e.uri,contextUri:n,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:null!==(d=e.isExplicit)&&void 0!==d&&d,isPlayable:!0,isMOGEFRestricted:null!==(p=e.is19PlusOnly)&&void 0!==p&&p,type:e.isLocal?o.jO.LOCAL:o.jO.TRACK,section:i,usePlayContextItem:s})}return a().createElement(o.Lb,{height:`${o.dN}px`})}),[l,n,i,s]);return m&&a().createElement(o.Pv,{ariaLabel:t,tracks:m,nrTracks:m.length,onRemove:d,renderRow:p,resolveUri:e=>e.uri,resolveUid:e=>{var t;return null!==(t=e.uid)&&void 0!==t?t:e.uri},columns:[o.QD.INDEX,o.QD.TITLE,o.QD.ALBUM,o.QD.DURATION]})}));var G="_P3PQg2YradlgHA8FMYw",B=n(64954);const M=({onClick:e})=>a().createElement(B.z,{className:G,version:"outlined",onClick:e,title:N.ag.get("queue.clear-queue")},a().createElement(x.Dy,{variant:x.$e.minuetBold},N.ag.get("queue.clear-queue")));var X="IopsGNiFd0zm2pWI3F1t",Z="TYXSSniI54lYXDbR34yS",W="_9P2xb5cM2WxdthrcC9U",V="wI16x3qtEZ6y9rsyL6f_",H="_AGbFzXvi4y0wdOzaODN",K=n(43938),J="xcxdiSzDr5qL06wCgxh0",ee="gImZbmZ_vtmkFQz4265T",te="Vn8xiE_V_Aadt2E5Utxz",ne="p_qbyHi7Ng9WEmYS2IXj",re="F4gvUKx1SzVPz_ilw91V",ae=n(18686),le=n(58558);const ie=a().memo((({onClose:e,onConfirm:t,isOpen:n,itemCount:l})=>{const i=(0,r.useCallback)((n=>{t(),e(n)}),[t,e]),s=N.ag.get("queue.confirm-title",l);return a().createElement(ae.Z,{shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:s,isOpen:n},a().createElement("div",{className:J},a().createElement(x.Dy,{as:"h2",variant:x.Dy.cello,className:ee},s),a().createElement(x.Dy,{as:"p",variant:x.Dy.mesto,className:te},N.ag.get("queue.confirm-message")),a().createElement("div",{className:ne},a().createElement(le.Y,{className:re,version:"tertiary",onClick:e},N.ag.get("queue.cancel-button")),a().createElement(le.Y,{version:"primary",onClick:i},N.ag.get("queue.confirm-button")))))}));var se=n(23),ue=n(18291),oe=n(48574);var ce=n(76654),me=n(86152);const de=()=>a().createElement("div",{className:P},a().createElement(me.j,{iconSize:64}),a().createElement(x.Dy.h1,{variant:x.$e.alto,color:k.$_Y.white,className:C},N.ag.get("queue.empty-title")),a().createElement("p",null,N.ag.get("queue.empty-description")),a().createElement(ce.OL,{to:"/search",className:_},a().createElement(le.Y,{version:"secondary"},N.ag.get("queue.fine-something"))));var pe=n(93743),ge=n(21027);var Ee=n(43011);const ve=()=>{const{uri:e,description:t}=(0,ue.Y)((e=>{var t,n,r;return{uri:null!==(t=null==e?void 0:e.context.uri)&&void 0!==t?t:null,description:null!==(n=null==e||null===(r=e.context.metadata)||void 0===r?void 0:r[R.sb.CONTEXT_DESCRIPTION])&&void 0!==n?n:null}}),oe.V),n=(0,T.g)(),{current:l,nextUp:i,queued:s}=function(){const e=(0,T.g)(),[t,n]=(0,r.useState)(e.getQueue());return(0,ge.G)(pe.rg.QUEUE_UPDATE,(e=>n(e.data))),t}(),[u,o]=(0,r.useState)(!1),m=(0,r.useCallback)((()=>{o(!1)}),[o]),d=(0,r.useCallback)((()=>{n.clearQueue(),o(!1)}),[n]),p=(0,r.useCallback)((()=>{o(!0)}),[o]),{usePlayContextItem:g}=(0,se.n)({uri:null!=e?e:""},{featureIdentifier:"queue"}),E=!(null==s||!s.length),v=!(null==i||!i.length);return!1===(l||E||v)?a().createElement(de,null):a().createElement("section",{className:X},a().createElement(Ee.$,null,N.ag.get("queue.page-title")),a().createElement(x.Dy.h1,{variant:x.$e.canon,color:k.$_Y.white,className:Z},N.ag.get("playback-control.queue")),l&&e&&a().createElement(a().Fragment,null,a().createElement(x.Dy.h2,{variant:x.$e.balladBold,color:k.$_Y.gray70},N.ag.get("queue.now-playing")),a().createElement(c.ZP,{value:"now-playing"},a().createElement(z,{ariaLabel:N.ag.get("queue.now-playing"),tracks:[l],contextUri:e,section:K.hb.NowPlaying,usePlayContextItem:g}))),E&&e&&a().createElement(a().Fragment,null,a().createElement("div",{className:j()(H,W)},a().createElement(x.Dy.h2,{variant:x.$e.balladBold,color:k.$_Y.gray70},N.ag.get("queue.next-in-queue")),E&&a().createElement(M,{onClick:p})),a().createElement(c.ZP,{value:"next-in-queue"},a().createElement(z,{ariaLabel:N.ag.get("queue.next-in-queue"),tracks:s,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",section:K.hb.NextInQueue,usePlayContextItem:g}))),v&&e&&a().createElement(a().Fragment,null,a().createElement(x.Dy.h2,{variant:x.$e.balladBold,color:k.$_Y.gray70,className:j()(W,"standalone-ellipsis-one-line")},t?N.ag.get("queue.next-from"):N.ag.get("queue.next-up")," ",a().createElement(A.r,{className:V,to:e},t)),a().createElement(c.ZP,{value:"next-up"},a().createElement(z,{ariaLabel:N.ag.get("queue.next-up"),tracks:i,rowNumberOffset:1+((null==s?void 0:s.length)||0),contextUri:"spotify:app:queue:NextUp",section:K.hb.NextUp,usePlayContextItem:g}))),a().createElement(ie,{itemCount:(null==s?void 0:s.length)||0,isOpen:u,onClose:m,onConfirm:d}))};var ye=n(60210),fe=n(28685),be=n(18299),he="_wF5s24pwrT1i_BWklL1";const Oe=()=>{const[e,t]=(0,r.useState)(window.innerWidth);(0,ye.a)((()=>{t(window.innerWidth)}));const n=(0,r.useMemo)((()=>[{title:N.ag.get("playback-control.queue"),itemId:"queue",to:"/queue"},{title:N.ag.get("view.recently-played"),itemId:"history",to:"/history"}]),[]);return a().createElement(be.w,null,a().createElement(fe.n,{className:he,links:n,windowSize:e}))},we=()=>{const e=(0,i.nF)();return a().createElement("section",{className:"contentSpacing"},e&&a().createElement(l.AW,{path:"/history"},a().createElement(U,null)),a().createElement(l.AW,{path:"/queue"},a().createElement(r.Suspense,{fallback:null},a().createElement(ve,null))),e&&a().createElement(Oe,null))};var ke=we},28685:function(e,t,n){n.d(t,{n:function(){return x}});var r=n(27378),a=n.n(r),l=n(60042),i=n.n(l),s=n(72724),u=n(35181),o="DoAFB029o_rF4_A1H6gt",c="_u8dRTQU7kP1o_3B3Zg8",m="B4fs9E1WWRvnKx8sDi8j",d="HuIrBBIEoFiyiVvqVS4l",p="_qXv1chKLLm91pmKO3rA",g="MkyqSDEIiLFy5USm7gRH",E="queue-tabBar-active",v="queue-tabBar-headerItemLink",y="UNl7YnDOXhtw0wA0i8a4",f="J3PCQkumqg15ssE0s__6",b=n(9807),h=n(36256),O=n(34761),w=n(79744);const k=({items:e,activeItemId:t,setActiveDropdownItem:n})=>a().createElement(O.v,null,e.map((e=>a().createElement(w.s,{role:"menuitemradio",to:e.to,exact:!0,"aria-checked":e.itemId===t,className:g,activeClassName:E,isActive:t=>!!t&&(n(e),!0),onClick:()=>{n(e)}},e.title)))),x=a().memo((({isCentered:e,links:t,landmarkLabel:n,className:l,windowSize:g=1/0})=>{const[O,w]=(0,r.useState)(null),x=(0,r.useRef)(null),[D,N]=(0,r.useState)([]),[P,C]=(0,r.useState)(0),[_,I]=(0,r.useState)([]);(0,r.useEffect)((()=>{x.current&&C(x.current.clientWidth)}),[g]),(0,r.useEffect)((()=>{if(!x.current)return;const e=Array.from(x.current.children).map((e=>e.clientWidth));N(e)}),[t]),(0,r.useEffect)((()=>{if(!x.current)return;if(D.slice(0,-1).reduce(((e,t)=>e+t),0)<=P)return void I([]);const e=D.reduce(((e,t)=>e>t?e:t),0),t=[];let n=e;D.forEach(((e,r)=>{P>=n+e?n+=e:t.push(r)})),I(t)}),[P,D]);const q=(0,r.useCallback)((e=>!!e&&(w(null),!0)),[]);return a().createElement("nav",{className:i()(l,o),"aria-label":n},a().createElement("ul",{className:e?c:y,ref:x},t.filter(((e,t)=>!_.includes(t))).map((e=>a().createElement("li",{key:e.to,className:m},a().createElement(s.O,{exact:!0,className:v,activeClassName:E,to:e.to,isActive:q},a().createElement(b.Dy,{variant:b.Dy.mestoBold},e.title))))),_.length||0===D.length?a().createElement("li",{className:m},a().createElement(h.xV,{renderInline:!0,menu:a().createElement(k,{items:t.filter(((e,t)=>_.includes(t))),activeItemId:null==O?void 0:O.itemId,setActiveDropdownItem:w})},((e,t,n)=>a().createElement("button",{className:i()(d,{[p]:O}),type:"button",onClick:t,ref:n},a().createElement(b.Dy,{as:"span",variant:b.Dy.mestoBold},O?O.title:u.ag.get("more")),a().createElement("span",{className:i()(f,{"spoticon-chart-up-16":e,"spoticon-chart-down-16":!e})}))))):null))}))},61750:function(e,t,n){n.d(t,{$V:function(){return r}});const r=e=>{var t;return(null==e||null===(t=e.linked_from)||void 0===t?void 0:t.uri)||e.uri}}}]);
//# sourceMappingURL=xpui-routes-queue.js.map