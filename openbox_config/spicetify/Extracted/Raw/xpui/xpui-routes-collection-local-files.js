"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[379],{296:function(e,t,l){l.r(t),l.d(t,{default:function(){return Y}});var n=l(64649),r=l(14298),a=l(83332),i=l(27378),o=l.n(i),c="r6WrlrFg43LbFLJu5l5H",s="_BTne_VR5pO5tq1GUT66",u=l(35181),m=l(35511),d=l(76385),f=l(13170),g=l(90849),E=l(41805),p=l(66027),y=l(26425),b=l(36726),x=l(79378),h=l(50878),k=l(40299),C=l(46208),v=l(88254),P=l(51029),D=l(70266),R=l(2124),S=l(72612),O=l(5464),I=l.n(O),w=l(56904),T=l(18499),U=l(37585),j=l(12275);const A=o().memo((({uri:e,uid:t,name:l,duration_ms:n,artists:r,album:a,isMOGEFRestricted:c,isExplicit:s,isPlayable:m,index:d,contextUri:f,imgUrl:g,usePlayContextItem:E})=>{const{filter:p}=(0,i.useContext)(T.fo),{isActive:y,isPlaying:b,triggerPlay:x,togglePlay:k}=E({uid:t,uri:e,index:d}),O=(0,w.P)(),{badges:A,hasBadges:N}=(0,D.r)({isExplicit:s}),B=(null==r?void 0:r.map((e=>e.name)).join(u.ag.getSeparator()))||"";return o().createElement(h.ZP,{value:"row",index:d},o().createElement(j._,{menu:o().createElement(U.N,{uri:e,uid:t,contextUri:f})},o().createElement(P.c,{uri:e,contextUri:f,isActive:y,index:d,onTriggerPlay:()=>{x()},ariaRowIndex:d+1,isPlayable:m,ageRestricted:c,dragMetadata:{name:l,createdBy:B}},o().createElement(v.Dd,{ariaColIndex:0},o().createElement(v.Du,{playAriaLabel:u.ag.get("tracklist.a11y.play",l,B),isPlaying:b,onClick:()=>{k()}},o().createElement(v.km,null,d+1))),o().createElement(v.vZ,{ariaColIndex:1},o().createElement(v.lD,{src:g||(0,S.c)()}),o().createElement(v.vm,null,o().createElement(v.Wh,null,o().createElement(I(),{searchWords:[p],textToHighlight:l,findChunks:O,highlightClassName:C.Z.filterHighlight})),N&&o().createElement(v.g3,null,A.explicit?o().createElement(R.N,null):null),o().createElement(v.K9,null,r&&o().createElement(w.o,{nonInteractive:!0,artists:r,filter:p})))),o().createElement(v.UA,{ariaColIndex:2},a.name&&o().createElement(v.BM,{nonInteractive:!0,uri:a.uri,name:a.name},o().createElement(I(),{searchWords:[p],textToHighlight:a.name,findChunks:O,highlightClassName:C.Z.filterHighlight}))),o().createElement(v.mU,{ariaColIndex:3},o().createElement(v.A$,{duration:n}),o().createElement(v.Zv,{menu:o().createElement(U.N,{uri:e,uid:t,contextUri:f})})))))}),((e,t)=>e.uri===t.uri&&e.index===t.index));var N=l(83553);const B=new Set(N.MI),Q=o().memo((({uri:e,tracks:t,columns:l,sortState:n,handleSort:r,usePlayContextItem:a,tracklistDomRef:c})=>{const s=(0,i.useRef)(null),m=(0,i.useCallback)(((t,l)=>{const n=(0,k.X)(t.album.images,{desiredSize:40,desiredLabel:"small"});return o().createElement(A,{key:t.uid,index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,type:t.type,imgUrl:(null==n?void 0:n.url)||"",usePlayContextItem:a})}),[e,a]);return o().createElement(o().Fragment,null,o().createElement(h.ZP,{value:"playlist-tracklist"},o().createElement(x.Pv,{key:e,ariaLabel:u.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:B,sortState:n,onSort:r,renderRow:m,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:s,outerDomRef:c})))}));var F=l(17088),L=l(75845),_=l(47820),z=l(11847),M=l(1266),Z=l(86268),H=l(40093),K=l(73977),W=l(90700),G=l(23),X=l(79032);function q(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function $(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?q(Object(l),!0).forEach((function(t){(0,n.Z)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):q(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}const J=[x.QD.INDEX,x.QD.TITLE,x.QD.ALBUM,x.QD.DURATION],V=()=>{const{filter:e}=(0,i.useContext)(T.fo),{sortState:t,setSortState:l}=(0,i.useContext)(N.Gb),n=(0,i.useContext)(L.t),{useNamespacedLocalStorage:x}=(0,i.useContext)(H.Xz),[h]=x(K.J,!1),k=(0,f.sn)(),[C,v]=(0,i.useState)([]),P=(0,Z.Y)(r.Fzl),{filterBoxApiRef:D,filterBoxDomRef:R,tracklistDomRef:S,handleKeyDown:O}=(0,X.Q)(),I=(0,i.useCallback)((e=>{l((0,z.VK)(e,t))}),[t,l]),w=(0,i.useCallback)((async()=>{const l=await n.getContents({sort:(0,z._j)(t),filter:(0,z.$u)(e)});v(l.items)}),[n,t,e]);(0,i.useEffect)((()=>{w()}),[w]);const{isPlaying:U,togglePlay:j,usePlayContextItem:A}=(0,G.n)({uri:_.bf,pages:[{items:C.map((e=>$($({},e),{},{provider:null})))}]},{featureIdentifier:"local_files"});return k?0!==k.totalLength&&h?o().createElement("div",{role:"presentation",className:c,onKeyDown:O},o().createElement(p.gF,{backgroundColor:P},o().createElement(g.W,null,o().createElement(y.$,{size:m.qE.sm,onClick:()=>j(),isPlaying:U,uri:_.bf}),o().createElement(E.i,{text:u.ag.get("local-files")})),o().createElement(p.sP,null,o().createElement(p.xd,null,u.ag.get("local-files")),o().createElement(p.T0,null,u.ag.get("local-files.description")))),o().createElement(d.o,{backgroundColor:P},o().createElement(d.F,null,o().createElement(y.$,{size:m.qE.xl,onClick:()=>j(),isPlaying:U,uri:_.bf}),o().createElement("div",{className:s},o().createElement(M.K,{placeholder:u.ag.get("playlist.search_in_playlist"),filterBoxApiRef:D,outerRef:R}),o().createElement(W.c,{columns:N.MI})))),o().createElement("div",{className:"contentSpacing"},o().createElement(Q,{tracks:C,uri:_.bf,columns:J,handleSort:I,sortState:t,usePlayContextItem:A,tracklistDomRef:S}))):o().createElement(F.u,{linkTo:"/preferences",linkTitle:u.ag.get("local-files.empty-button"),message:u.ag.get("local-files.empty-description"),title:u.ag.get("local-files.empty-header")},o().createElement(a.X,{iconSize:64})):o().createElement(b.h,{errorMessage:u.ag.get("error.request-artist-failure")})};var Y=()=>o().createElement(N.kz,{uri:"spotify:internal:local-files"},o().createElement(T.hz,{uri:"spotify:internal:local-files"},o().createElement(V,null)))},90700:function(e,t,l){l.d(t,{c:function(){return m}});var n=l(27378),r=l.n(n),a=l(79378),i=l(83553),o=l(11847),c=l(81368),s=l(2315);function u(e){return!!e}const m=({columns:e})=>{const t=[...e];t.splice(2,0,a.QD.ARTIST);const{sortState:l,setSortState:m}=(0,n.useContext)(i.Gb),d=function(e){return null===e.column?s.mE[a.QD.INDEX]:(0,o.cB)(e.column,e.order)?s.mE[a.QD.ARTIST]:s.mE[e.column]}(l),f=(0,n.useCallback)((e=>{m((0,s.WQ)(e,l.column,l.order))}),[m,l.column,l.order]),g=(0,n.useCallback)((()=>null!==l.column),[l.column]),E=t.map((e=>s.mE[e])).filter(u);return r().createElement(c.A,{options:E,onSelect:f,selected:d,isSelectionChanged:g,sortOrder:l.order})}},79032:function(e,t,l){l.d(t,{Q:function(){return r}});var n=l(27378);const r=()=>{const e=(0,n.useRef)(null),t=(0,n.useRef)(null),l=(0,n.useRef)(null);return{filterBoxApiRef:e,filterBoxDomRef:t,tracklistDomRef:l,handleKeyDown:n=>{var r,a,i;"Escape"===n.key&&((null!==(r=t.current)&&void 0!==r&&r.contains(n.target)||null!==(a=l.current)&&void 0!==a&&a.contains(n.target))&&(null===(i=e.current)||void 0===i||i.clearFilter()))}}}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map