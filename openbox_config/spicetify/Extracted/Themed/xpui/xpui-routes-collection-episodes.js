"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[289],{24209:function(e,t,n){n.d(t,{Q:function(){return s},$:function(){return o}});var a=n(27378),i=n.n(a),r=n(94744),l=n(2315);const s=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:l.oT.ADDED_AT}),o=i().memo((function({uri:e,children:t,defaultSortOption:n}){return i().createElement(r.r,{uri:e,defaultState:n,sortContext:s},t)}))},9195:function(e,t,n){n.d(t,{E:function(){return d}});var a=n(27378),i=n.n(a),r=n(57660),l="collection-searchBar-searchBar",s=n(1266),o=n(81368),c=n(2315),u=n(24209);const m=i().memo((({sortOptions:e})=>{const{sortState:t,setSortState:n}=(0,a.useContext)(u.Q),r=(0,a.useCallback)((e=>{n(c.ei[e])}),[n]),l=e.map((e=>c.MY[e])),s=c.MY[t];return i().createElement(o.A,{options:l,onSelect:r,selected:s})})),d=i().memo((({filterPlaceholder:e,sortOptions:t})=>{const n=(0,a.useContext)(r.H);return i().createElement("div",{className:l},null!=n&&n.getCapabilities().canFilter?i().createElement(s.K,{placeholder:e}):null,null!=n&&n.getCapabilities().canSort?i().createElement(m,{sortOptions:t}):null)}))},38869:function(e,t,n){n.d(t,{K:function(){return v}});var a=n(27378),i=n.n(a),r=n(60042),l=n.n(r),s=n(69971),o="AXHcaOP8T3RZeO7KJyVk",c=n(35181),u=n(60854),m=n(46872),d=n(91592);const p=i().memo((({onClick:e=(()=>{}),size:t,className:n,uri:r,sharingInfo:s,interactionData:p})=>{const{onCopyLink:g}=(0,d.y)({sharingInfo:s,uri:r,interactionData:p}),E=(0,a.useCallback)((()=>{g(),e()}),[e,g]);return i().createElement(m.E,{ariaLabel:c.ag.get("mwp.list.item.share"),size:t,onClick:E,className:l()(o,n),icon:u.M})}));var g=n(21723),E=n(34834),f=n(75609),y=n(21380),h=n(2835);const b={intent:"share",type:"click",itemIdSuffix:"contextmenu/episode/share"},v=i().memo((({episodeUri:e,showUri:t,sharingInfo:n,canDownload:r})=>{const{useDownloading:o}=(0,a.useContext)(f.I),{currentAvailability:c}=o(e),u=[y.V8.YES,y.V8.DOWNLOADING,y.V8.WAITING].includes(c),m=(0,a.useMemo)((()=>i().createElement(E.p,{uri:e,size:E.q.sm,showUri:t,className:l()({[s.Z.visibleDownloadButton]:u})})),[e,t,u]),d=(0,a.useMemo)((()=>i().createElement(p,{uri:e,sharingInfo:n,interactionData:b})),[e,n]),v=(0,a.useMemo)((()=>i().createElement(g.w,{uri:e,size:h.q.sm,className:s.Z.saveButton})),[e]);return i().createElement(i().Fragment,null,d,r&&m,v)}))},65898:function(e,t,n){n.r(t),n.d(t,{YourEpisodes:function(){return K},YourEpisodesContainer:function(){return J},default:function(){return ee}});var a=n(27378),i=n.n(a),r=n(47059),l=n(35181),s=n(57660),o=n(36726),c=n(66027),u=n(90849),m=n(41805),d=n(76385),p=n(26425),g=n(35511),E=n(92270),f=n(82229),y=n(50878),h=n(58324),b=n(20280),v=n(2124),C=n(88319),w=n(12275),x=n(18237),k=n(38869),P=n(49107),S=n(5312),I=n(88886),N=n(8360),O=n(89614),D=n(75609),_=n(23),A=n(83509),U=n(64619),M=n(18291),R=n(70266),B=n(73088),L=n(95962);const z={small:64,standard:300,large:640,xlarge:1024},Z=i().memo((({index:e,contextUri:t,episode:n,onRemove:r,usePlayContextItem:l})=>{var s,o,c,u;const m=(0,a.useRef)(n.duration.milliseconds-n.timeLeft.milliseconds),d=n.uri,[p,g]=(0,a.useState)(0===n.timeLeft.milliseconds),E=(0,h.O1)(),f=(0,P.jh)(),Z=(0,C.o)(),[T]=(0,O.Z)(d,!0),{useCurrentAvailability:j}=(0,a.useContext)(D.I),[H]=j(d),V=(0,A.k)(),W=(0,M.Y)((e=>{var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===n.uri){var a;const t=null!==(a=(0,L.k)(e))&&void 0!==a?a:0;return m.current=t,t}return 0})),{isPlaying:q,isActive:Y,togglePlay:Q}=l({uri:d,index:e}),{isPlaying:$,isActive:F,togglePlay:G}=(0,_.n)({uri:d,pages:[{items:[{type:U.p.EPISODE,uri:d,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,a.useEffect)((()=>{T||r()}),[T,r]);const X=(0,a.useCallback)((()=>{Z({type:"click",targetUri:d,intent:"navigate"})}),[d,Z]),K=(0,a.useCallback)((()=>{V?(Z({type:"click",intent:q?"pause":"play"}),Q()):(Z({type:"click",intent:$?"pause":"play"}),G())}),[V,q,$,Z,Q,G]),J=null!==(s=null===(o=n.podcastSubscription)||void 0===o?void 0:o.isPaywalled)&&void 0!==s&&s,ee=null!==(c=null===(u=n.podcastSubscription)||void 0===u?void 0:u.isUserSubscribed)&&void 0!==c&&c,{badges:te}=(0,R.r)({isExplicit:n.isExplicit,isPaywalled:J});let ne=!1;return(Y||!V&&F)&&(ne=!0),T?i().createElement(y.ZP,{value:"row",index:e},i().createElement(w._,{menu:i().createElement(x.k,{uri:d,showUri:n.show.uri,isPlayed:p,onMarkAsPlayed:g})},i().createElement(b.X,{index:e,uri:d,uid:d,size:f,images:n.images.map((e=>({url:e.url,width:e.width||(e.label?z[e.label]:null),height:e.height||(e.label?z[e.label]:null)}))),isPaywalled:J,isUserSubscribed:ee,name:n.name,showName:n.show.name,showUri:n.show.uri,description:n.description,isPlayable:n.isPlayable&&H,fullyPlayed:p,durationMs:n.duration.milliseconds,releaseDate:n.release.date.toString()||"",resumePositionMs:m.current,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const a=`${n.name} Â· ${n.show.name}`;E(e,[d],a,t)},handlePlaybackClick:K,handleClick:X,isCurrentlyPlaying:ne,isPlaying:V?q:$,position:ne?W:void 0,badges:i().createElement(i().Fragment,null,te.explicit&&i().createElement(v.N,null),te.paid&&i().createElement(B.g,null)),playButtonWrapper:e=>i().createElement(N.l,{enabled:J&&!ee},e),actionButtons:i().createElement(k.K,{episodeUri:d,sharingInfo:null,showUri:n.show.uri,canDownload:!J||J&&ee}),topActionButtons:i().createElement(I.y,{menu:i().createElement(x.k,{uri:d,showUri:n.show.uri,isPlayed:p,onMarkAsPlayed:g})},i().createElement(S.z,{size:S.q.sm}))}))):null}));var T=n(4251),j=n(2315),H=n(24209),V=n(18499);const W=i().memo((({contextUri:e,usePlayContextItem:t})=>{const n=(0,a.useContext)(s.H),{sortState:r}=(0,a.useContext)(H.Q),l=(0,a.useRef)(0),{filter:o}=(0,a.useContext)(V.fo),c=(0,a.useCallback)((async(e,t)=>{const a=await n.getEpisodes({offset:e-l.current,limit:t,sort:(0,j.sv)(r),filter:(0,j.$u)(o)});return l.current=0,((e,t)=>{const n=t+e.items.length;return{totalCount:e.totalLength,items:e.items,pagingInfo:{nextOffset:n<e.totalLength?n:null}}})(a,e)}),[o,n,r]),u=(0,a.useCallback)((()=>{l.current++}),[]),m=(0,a.useCallback)(((n,a)=>i().createElement(Z,{key:`${n.uri}/${a}`,index:a,episode:n,contextUri:e,onRemove:u,usePlayContextItem:t})),[e,u,t]),{ref:d,breakpoint:p}=(0,P.Db)({[P.Uo.MEDIUM]:0,[P.Uo.LARGE]:600});return i().createElement(P.ZU.Provider,{value:p},i().createElement(y.ZP,{value:"track-list"},i().createElement(T.k,{showUri:"",ref:d,renderRow:m,fetchEpisodes:c})))}));var q=n(42044),Y=n(35896),Q=n(68657),$=n(9195),F=n(17088),G=n(11847),X=n(25736);const K=({metadata:e,canSort:t})=>{const n=(0,f.Y5)("#006450"),{sortState:s}=(0,a.useContext)(H.Q),{filter:o}=(0,a.useContext)(V.fo),E=(0,A.k)(),{isPlaying:y,togglePlay:h,usePlayContextItem:b}=(0,_.n)({uri:e.uri,metadata:{[q.sb.SORTING_CRITERIA]:(0,j._s)(s),[q.sb.FILTERING_PREDICATE]:(0,G.aK)(o)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),v=()=>h(),{uri:C,name:w,images:x,totalLength:k,owner:P}=e,S=(0,a.useMemo)((()=>({id:P.username,uri:P.uri,name:P.username,displayName:P.displayName||void 0,images:P.images||[]})),[P]),I=e.totalLength>0;return i().createElement("section",{className:X.Z.yourEpisodes,"data-testid":"your-episodes-page"},i().createElement(c.gF,{backgroundColor:n},i().createElement(u.W,null,i().createElement(p.$,{size:g.qE.sm,onClick:v,isPlaying:y,uri:C,disabled:!E}),i().createElement(m.i,{text:w})),i().createElement(c.Oz,{images:x,name:w,shape:Y.K.ROUNDED_CORNERS,renderImage:()=>i().createElement(Q.$,null)}),i().createElement(c.sP,null,i().createElement(c.dy,{small:!0,uppercase:!0},l.ag.get("playlist")),i().createElement(c.xd,{canEdit:!1,onClick:()=>{},className:X.Z.playlistTitle},w),i().createElement(c.QS,{creators:[S],totalEpisodes:k}))),i().createElement("div",{className:X.Z.yourEpisodesContentWrapper},i().createElement(d.o,{backgroundColor:n},i().createElement(d.F,null,I&&i().createElement(p.$,{onClick:v,isPlaying:y,size:g.qE.lg,uri:C,disabled:!E}),t&&i().createElement("div",{className:X.Z.searchBoxContainer},i().createElement($.E,{filterPlaceholder:l.ag.get("playlist.search_in_playlist"),sortOptions:j.$2})))),i().createElement("div",{className:"contentSpacing"},e.totalLength>0&&i().createElement(W,{contextUri:C,usePlayContextItem:b}))),0===e.totalLength&&i().createElement("div",{className:"contentSpacing"},i().createElement(F.u,{message:l.ag.get("collection.empty-page.episodes-subtitle"),title:l.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:l.ag.get("collection.empty-page.shows-cta"),renderInline:!0},i().createElement(r.Z,null))))},J=i().memo((()=>{const e=(0,a.useContext)(s.H).getCapabilities(),t=(0,E.x)();return t?i().createElement(H.$,{uri:t.uri,defaultSortOption:j.oT.ADDED_AT},i().createElement(V.hz,{uri:t.uri},i().createElement(K,{metadata:t,canSort:e.canSort&&t.totalLength>0}))):i().createElement(o.h,{errorMessage:l.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}));var ee=J},20280:function(e,t,n){n.d(t,{X:function(){return C}});var a=n(27378),i=n.n(a),r=n(76654),l=n(85002),s=n(66917),o=n.n(s),c=n(60042),u=n.n(c),m={episodeBlock:"mojwW3ensP59VkP4Vs_e",isActive:"_f64yVuw2UQ5xCB53VzG",title:"_g8Bdki_n8nxzIbAVn_S",titleLink:"qMrb72bOf3cBtwlepRyu",selected:"_pdjga8YyNRwSdJbzpzp",topActions:"_OOWCxmsUuIDLKr9zY7d",actions:"_hkqbFZ8SjCHHcSgxzXw",musicAndTalkArtistContainer:"_GJ3dGTdWAEg6iNhQSyM",musicAndTalkArtists:"ev7PE7diAs667F_d8sVR",playlistIcon:"XkGI6bZ29nKLqr0BpW5e",noHover:"jF_9kxrtC_2SjfXDuuhn",imageContainer:"Gxq4YvRnZAXQF8TrsCn4",showImage:"iFDWB1rejy4gEgyzLOB6",description:"XC2fKcHlE3yNzlra_Zex",metadata:"X36EcyNavFJiML_Rsthn",badges:"OB_99uWys1RU2qe_TxGH",medium:"JuybDBNJf3eeRhZyT13h",large:"iH_EOyfU_iz90cgk7aIZ",header:"RdbO6mNzHkie745sxiht",descriptionContainer:"f4dgEM3_Xbw0IC73UUZJ",playerActions:"MQZ49UqipmrLSmcFNjec"},d=n(35511),p=n(9807),g=n(42294),E=n(64619),f=n(35896),y=n(21311),h=n(49107),b=n(29874);var v=n(34601);const C=i().memo((({uri:e,name:t,showName:n,showUri:s,size:c,description:C,durationMs:w,images:x,badges:k,fullyPlayed:P,releaseDate:S,resumePositionMs:I,isCurrentlyPlaying:N,isPlaying:O,actionButtons:D,topActionButtons:_,onContextMenu:A,onTouchStart:U,onTouchEnd:M,handlePlaybackClick:R,handleDragStart:B,handleClick:L,position:z,index:Z,isPlayable:T,isPaywalled:j,isUserSubscribed:H,playButtonWrapper:V=null})=>{var W;const q=(0,l.k6)(),Y=N&&O,Q=o().from(e).toURLPath(!0),$=null===(W=o().from(s))||void 0===W?void 0:W.toURLPath(!0),F=function({episodeUri:e}){const[t,n]=(0,a.useState)([]),i=(0,b.G)();return(0,a.useEffect)((()=>{let t=!0;return async function(){const a=await i.getArtists(e);t&&n(a)}(),()=>{t=!1}}),[e,i]),t}({episodeUri:e}),G=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),q.push(Q),L&&L(e)}),[Q,q,L]),X=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),$&&q.push($)}),[$,q]),K=j&&!H,J=(0,a.useCallback)((e=>{e.stopPropagation(),K||R(e)}),[R,K]),ee=e=>{e.stopPropagation()},te=K||T,ne=i().createElement(d.JM,{size:d.qE.xs,version:d.ul.secondary,onClick:J,isPlaying:Y,disabled:!te,locked:K}),ae=V?V(ne):ne;return i().createElement("div",{className:u()(m.episodeBlock,{[m.isActive]:N,[m.medium]:c===h.Uo.MEDIUM,[m.large]:c===h.Uo.LARGE,[m.noHover]:c===h.Uo.XSMALL}),"data-testid":`episode-${Z}`,draggable:!!B,onDragStart:B,onClick:G,onContextMenu:A,onTouchStart:U,onTouchEnd:M},i().createElement("div",{className:m.imageContainer},i().createElement(f.O,{className:u()(m.entityImage,m.showImage),type:E.p.EPISODE,size:(e=>{switch(e){case h.Uo.LARGE:return y.m$.SIZE_112;case h.Uo.MEDIUM:return y.m$.SIZE_64;default:return y.m$.SIZE_48}})(c),title:t,shape:f.K.ROUNDED_CORNERS,images:x})),i().createElement("div",{className:m.header},i().createElement(r.rU,{className:m.titleLink,to:Q,onClick:G},i().createElement(p.Dy.h4,{variant:p.Dy.balladBold,className:m.title},t)),F.length>0&&i().createElement("div",{className:m.musicAndTalkArtistContainer},i().createElement(v.e,{iconSize:16,className:m.playlistIcon}),i().createElement(p.Dy.p,{variant:p.Dy.mesto,className:m.musicAndTalkArtists},F.join(", "))),n&&$&&i().createElement(r.rU,{className:m.titleLink,to:$,onClick:X},i().createElement(p.Dy.h4,{variant:p.Dy.mestoBold,className:m.title},n))),i().createElement("div",{className:m.descriptionContainer},i().createElement(p.Dy.p,{variant:p.Dy.mesto,className:m.description},C)),i().createElement("div",{className:m.metadata},i().createElement("div",{className:m.badges},k),i().createElement(g.E,{isPlaying:Y,fullyPlayed:P,durationMs:w,releaseDate:S,resumePositionMs:I,position:N?z:void 0})),_&&i().createElement("div",{onClick:ee,className:m.topActions},_),i().createElement("div",{onClick:ee,className:m.actions},D),i().createElement("div",{className:m.playerActions},ae))}))},4251:function(e,t,n){n.d(t,{k:function(){return d}});var a=n(64649),i=n(27378),r=n.n(i),l="SlVKIBH4Y1VOs40N2VUM",s="BYq3_YRg2J9NFAlWc53g",o=n(75570),c=n(19873);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=r().memo(r().forwardRef(((e,t)=>{const{fetchEpisodes:n,renderRow:a,limit:u=50,showUri:d}=e,[p,g]=(0,i.useState)(c.d),E=(0,i.useRef)(!1),f=(0,i.useCallback)(((e=!1)=>{if(!n)return;const t=p.pagingInfo.nextOffset;if(null===t)return;const a=0===p.totalCount?u:Math.min(p.totalCount-t,u);!E.current&&a>0&&(E.current=!0,n(t,a).then((n=>{g((a=>{const i=e?[]:[...a.items];return i.splice(t,n.items.length,...n.items),m(m({},n),{},{items:i})})),E.current=!1})))}),[n,p.pagingInfo.nextOffset,p.totalCount,u]);return(0,i.useEffect)((()=>{g(c.d)}),[d,n]),(0,i.useEffect)((()=>{0===p.pagingInfo.nextOffset&&f(!0)}),[f,p.pagingInfo.nextOffset]),r().createElement("div",{ref:t},r().createElement(o.C,{onReachBottom:f,triggerOnInitialLoad:!0},p.items.map(((e,t)=>r().createElement("div",{className:s,key:`${t}${e.uid}`},r().createElement("hr",{className:l,"aria-hidden":!0}),a(e,t))))))})))},75570:function(e,t,n){n.d(t,{C:function(){return u}});var a=n(27378),i=n.n(a),r=n(9957),l=n(60042),s=n.n(l),o="_OIbzNaZUstr_dmIZnnU",c="_AqkCZVApAiJHpYacWlf";const u=i().memo((e=>{const{triggerOnInitialLoad:t=!1,onReachBottom:n,showScrollbar:l=!0,horizontalScroll:u=!1}=e,{ref:m,inView:d}=(0,r.YD)({initialInView:t});return(0,a.useEffect)((()=>{d&&n&&n()}),[d,n]),i().createElement("div",{className:s()({[c]:!l,[o]:u}),"data-testid":"infinite-scroll-list"},e.children,i().createElement("div",{ref:m}))}))},69971:function(e,t){t.Z={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",ShowPage:"_AE3dN4Mal1RQnaoHlEL",ShowContent:"_1WrCs8_uQkykMhmvP14",metadata:"XBMX3ds2w47inMESHo00",episodes:"__xnC8APzIV0CcBsInP9",episodesHeader:"_3_S0QESNdbtdM3P9MtS",episodesSort:"a2BXjMid6KrVfAPIcMxN",subtitle:"_QCDBnnQSAYQUozRth5G",sectionTitle:"qtlx_DlMfdlRxm5Yobz1",trailer:"AJaWyUE2loaJvCwq3BOy",visibleDownloadButton:"_w4jKvg3eW79H8kH7vW_",moreButton:"pqj9aIoWyFZxS_p1BCVN",saveButton:"qX3rfSQbu80_DIBV9B5T"}}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map