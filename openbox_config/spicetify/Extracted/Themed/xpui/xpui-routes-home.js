"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[807,219],{62016:function(e,t,n){n.r(t),n.d(t,{HOME_REFRESH_TIMEOUT:function(){return N},default:function(){return P}});var r=n(27378),a=n.n(r),l=n(60042),c=n.n(l),o=n(28979),i=n(75260),s=n(33954),u=n(61154),m=n(47574),E=n(54798),d=n(24887),f=n(18299);const g=()=>(0,m.Sq)(E.Jw)===E.pF.ONHOME?a().createElement(f.w,null,a().createElement(d.M,{onSearch:!1})):null;var p=n(36726),h=n(35181),y=n(85002),v=n(49492),k=n(1391),w=n(18474),b=n(21195),O=n(73521),C=n(47326),L=n(43011);const N=18e5;var P=a().memo((()=>{const{isAnonymous:e}=(0,i.v9)(k.Gg),{status:t}=(0,C.h)(O.N9.SIGNUP),n=(0,w.v8)(e,t===O.b_.COMPLETE),l=(0,i.v9)(s.r),m=(0,i.v9)((e=>((e,t)=>e.entities.views[t]||null)(e,n))),E=(0,i.I0)(),d=(0,y.k6)(),f=(0,b.g)(),P=!!m,T=(null==m?void 0:m.timestamp)||0,_=(0,r.useCallback)((()=>{l&&E((0,o.MM)(n,l))}),[l,n,E]);(0,r.useEffect)((()=>{f.setReferrer("home")}),[E,f]),(0,r.useEffect)((()=>{P&&"POP"===d.action||_()}),[d.action,P,_]),(0,r.useEffect)((()=>{const e=()=>{Date.now()>T+N&&_()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),[T,_]);const I=null==m?void 0:m.content.items;return a().createElement(a().Fragment,null,a().createElement(L.$,null,h.ag.get("page.generic-title")),a().createElement(r.Suspense,{fallback:null},a().createElement(g,null)),m?a().createElement("section",{"data-testid":"home-page"},a().createElement("div",{className:u.Z.home},a().createElement("div",{className:c()(u.Z.content,"contentSpacing")},a().createElement(v.c,{spaces:I,viewName:m.name,viewId:n,isAnonymous:e})))):a().createElement(p.h,{errorMessage:h.ag.get("error.not_found.title.page")}))}))},49492:function(e,t,n){n.d(t,{c:function(){return de}});var r=n(64649),a=n(27378),l=n.n(a),c=n(34992),o=n(36777),i=n(50878),s=n(31630),u=n(18474),m=n(60042),E=n.n(m),d="view-homeShortcutsGrid-shortcuts",f="view-homeShortcutsGrid-grid",g="view-homeShortcutsGrid-shortcutLink",p="KL469QQzoRZLOmKomNzk",h="z_dqOOSiQjEgjJbtW1qW",y="B3i7kN8tRTwP9s4XEK10",v="msOGVcFLw_5wwMOLzhye",k="htY8dgl7NWIfdTpQY3QF",w="d4Z5nlOVhTfNjYtNTm7k",b="_Xtjqr3it7fr5yseBgKp",O="_y64Rwd4CSmN70WJM7XS",C="GZEgjqyn5O0M_4qZGc_V",L="JMwv_vLYi2_hA1oFvmki",N=n(9807),P=n(44135),T=n(89341),_=n(191),I=n(9071),M=n(14298),S=n(60210),Z=n(25773),j=n(35181),A=n(66917),D=n.n(A),R=n(34601),U=n(52370),J=n(27572),W=n(12743),x=n(12275),B=n(16023),Y=n(85002),q=n(88319),F=n(99882),H=n(35511),G=n(54220),K=n(40299),Q=n(60244);const V=l().memo((({images:e=[],fallbackIcon:t=R.e})=>{const n=(0,K.X)(e),r=null!=n&&n.url?v:w;return l().createElement("div",{className:y},l().createElement("div",{className:r},l().createElement(Q.E,{className:k,src:null==n?void 0:n.url,loading:"lazy",testid:"shortcut-image"},l().createElement(t,{"aria-hidden":!0}))))}));var z=n(44084),X=n(23);const $=l().memo((({item:e,fallbackIcon:t,showPlayButton:n,onContextMenu:r=(()=>{}),onTouchStart:c=(()=>{}),onTouchEnd:o=(()=>{})})=>{const i=(0,Y.k6)(),s=(0,q.o)(),{setColorFromUri:u,resetColor:m}=(0,z.WQ)(),{isPlaying:d,togglePlay:f}=(0,X.n)({uri:e.uri},{featureIdentifier:"home",referrerIdentifier:"home"});const y=(0,a.useCallback)((()=>{s({targetUri:e.uri,intent:"navigate",type:"click"}),i.push(D().from(e.uri).toURLPath(!0))}),[i,e.uri,s]),v=(0,a.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return l().createElement("div",{className:p,onContextMenu:r,onTouchStart:c,onTouchEnd:o,onMouseEnter:v,onMouseLeave:m},l().createElement(F.Z,{uri:e.uri,text:e.name,extraClassName:h},l().createElement(V,{images:e.images,fallbackIcon:t}),l().createElement("div",{className:b},l().createElement(G.r,{to:e.uri,onClick:y,title:e.name},l().createElement(N.Dy.p,{variant:N.Dy.balladBold,className:O},e.name)),n&&l().createElement("div",{className:E()(C,{[L]:d})},l().createElement(H.JM,{size:H.qE.sm,isPlaying:d,onClick:function(){s({targetUri:e.uri,intent:d?"pause":"play",type:"click"}),f()}}))),l().createElement("div",{onClick:y,className:g})))}));var ee=n(52003),te=n(7164),ne=n(75933);const re=l().memo((e=>D().isCollection(e.item.uri)?l().createElement($,(0,Z.Z)({},e,{fallbackIcon:R.e})):l().createElement(x._,{menu:l().createElement(B.X,{uri:e.item.uri})},l().createElement($,(0,Z.Z)({},e,{fallbackIcon:R.e}))))),ae=l().memo((e=>l().createElement(x._,{menu:l().createElement(ee.Y,{uri:e.item.uri})},l().createElement($,(0,Z.Z)({},e,{fallbackIcon:U.u}))))),le=l().memo((e=>l().createElement(x._,{menu:l().createElement(te.m,{uri:e.item.uri})},l().createElement($,(0,Z.Z)({},e,{fallbackIcon:J.i}))))),ce=l().memo((e=>l().createElement(x._,{menu:l().createElement(ne.M,{uri:e.item.uri})},l().createElement($,(0,Z.Z)({},e,{fallbackIcon:W.n,showPlayButton:!1})))));var oe=n(83509);const ie=l().memo((({tagline:e,items:t})=>{const{fetchMultipleColors:n}=(0,z.WQ)(),[r,c]=(0,a.useState)(270),o=!(0,oe.k)(),i=(0,a.useRef)(null),s=(()=>{const e=(new Date).getHours();let t=j.ag.get("home.evening");return e>=5&&e<12?t=j.ag.get("home.morning"):e>=12&&e<18&&(t=j.ag.get("home.afternoon")),t})(),u=(0,a.useCallback)((()=>{const e=i.current;if(null==e||!e.parentElement)return;const t=(n=e.parentElement.offsetWidth)<700?240:n>=700&&n<1400?270:300;var n;t!==r&&c(t)}),[r]);(0,S.a)((()=>{u()})),(0,a.useLayoutEffect)((()=>{u()})),(0,a.useEffect)((()=>{const e=(null==t?void 0:t.map(z.lh))||[];n(e)}),[t,n]);const m=(0,a.useCallback)(((e,n)=>{if(null==t||!t.length)return null;const r=n>=270;return l().createElement(l().Fragment,null,t.filter(((t,n)=>n<2*e)).map(((e,t)=>{const n=function(e){const t=(D().from(e)||{}).type;switch(t){case D().Type.ARTIST:return le;case D().Type.ALBUM:case D().Type.COLLECTION_ALBUM:return ae;case D().Type.PLAYLIST:case D().Type.PLAYLIST_V2:return re;case D().Type.SHOW:return ce;case D().Type.COLLECTION:return re;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),ce}}(e.uri);return l().createElement(n,{key:e.id,item:e,showPlayButton:r,shouldSetBackgroundColor:0===t})})))}),[t]);return o||null==t||!t.length?null:l().createElement("section",{className:d,"aria-label":s,ref:i},l().createElement(_.r,{title:s,titleVariant:N.Dy.alto,tagline:e}),l().createElement(I.T,{className:E()(f),columnAware:!0,render:m,minimumColumnWidth:r,rowGap:M.o78}))})),se=(0,P.P)(ie,(()=>null),(e=>(0,T.v)({from:"HomeShortcutsGrid",error:e})));var ue=n(96816);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const de=({spaces:e,viewName:t,viewId:n,isAnonymous:r})=>{const m=(0,a.useCallback)((e=>{const t=((e,t)=>{let{uri:n}=e;return e.href.includes("https://api.spotify.com/v1/views/")&&(n=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),n.endsWith("-page")||(n+="-page"),"hub-browse-grid"===t&&(n=n.replace(":view:",":genre:"))),n})(e,n),r=(0,s.U)(t);return l().createElement(r,{key:e.href,entity:Ee(Ee({},e),{},{uri:t})})}),[n]),E=(0,a.useCallback)(((e,t)=>{const n=(0,s.U)(e.uri);return l().createElement(i.JL,{key:e.uri||t,value:"card",index:t},l().createElement(n,{entity:e}))}),[]),d=(0,a.useCallback)(((e,t)=>{switch(e.type){case"link":return m(e);default:return E(e,t)}}),[E,m]),f=(0,a.useCallback)((e=>!((e=>"HEADER"===e.rendering)(e)||0===e.content.total||r&&"uniquely-yours-shelf"===e.id)),[r]);return e&&0!==e.length?e[0].content?l().createElement(l().Fragment,null,e.filter(f).map(((e,t)=>{const r=e.content&&(0,c.pL)((0,c.SK)(e.href));return e.id===o.RECENTLY_PLAYED_VIEW_ID||e.id===u.uK?l().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},l().createElement(o.RecentlyPlayed,{showAll:!1})):"shortcuts"===e.id?l().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},l().createElement(se,{items:e.content.items,title:e.name,tagline:e.tag_line})):l().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},l().createElement(ue.P,{total:e.content.total,seeAllUri:r,pageId:n,title:e.name,tagline:e.tag_line||void 0},e.content.items.map(d)))}))):l().createElement(i.JL,{value:"headered-grid"},l().createElement(ue.P,{showAll:!0,title:t,total:(null==e?void 0:e.length)||0},null==e?void 0:e.map(d))):null}}}]);
//# sourceMappingURL=xpui-routes-home.js.map